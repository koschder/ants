\section{Missionen}
\label{sec:module.Missionen}

Missionen sind das Herzstück unserer Arbeit. Eine Mission dauert über mehrere Spielzüge und berechnet für jede teilnehmende Ameise welches ihr nächster Move ist. Nachfolgende Darstellung zeigt, dass alle Missionen von der abstrakten BaseMission abstammen und die BaseMission das Interface Mission implementiert. Die Lebensdauer einer Mission hängt davon ab, ob sie ihr Ziel erreicht oder ob sie schon führer abgebrochen werden muss. Ziel und Abbruchbedingungen sind je nach Mission unterschiedlich und werden im jeweiligen Abschnitt erklärt.

\begin{figure}[H]
\centering
\includegraphics[width=0.9\textwidth]{91_bilder/Missions}
\caption{Missionen und ihre Hierarchie}
\label{fig:missions}
\end{figure}


\subsection{BaseMission}
\label{subsec:module.Mission.BaseMission}

Diese Klasse hat zwei Verwendungszwecke, erstens Implementiert sie die von Interface Mission vorgegebene Methoden und zweitens stellt sie Funktionen zur Verfügung die von spezifischen Missionen verwendet werden. Die wichtigsten sind hier mit Erklärung aufgelistet.

\begin{itemize}
	\item  \textbf{abandonMission():} Abbrechen der Mission
	\item  \textbf{addAnt():} Ameise der Mission hinzufügen, in der Population als beschäftigt markieren.
	\item  \textbf{doAnyMove(Ant a):} Für die mitgegebene Ameise irgendein Zug in eine der vier Richtung bestimmen.
	\item  \textbf{doMoveInDirection(Ant ant, Tile target):} Ein Zug in eine bestimmte Richtung bestimmen.}
	\item  \textbf{gatherAnts(...):} Ameisen für die Mission rekrutieren. Anzahl Ameisen wird als Parameter mitgegeben. }
	\item  \textbf{moveToNextTileOnPath(Ant a):} Bewegt die Ameise ein Pfadstück weiter auf dem, der Ameisen zugewiesen, Pfad.}
	\item  \textbf{putMissionOrder(...):} Wurde ein Befehl für die Ameise gefunden wird er der Klasse Orders (Verwaltung der Befehle) mitgeteilt.}
	\item  \textbf{releaseAnts(int amount):} Ameisen vo der Mission entlassen. 
	\item  \textbf{checkEnviroment(...):} Mittels Breitensuche wird die Umgebung der Ameise nach eigenen Hügel, gegnerischen Hügel, gegnerischen Ameisen und Futterzellen gescannt. Je nach Mission wird beim Fund eines solchen Objekt die Mission abgebrochen, oder die Ameise von der Mission entlassen.
\end{itemize}
\\
\\
Nachfolgend werden die spezifischen Missionen erläutert. Tabellearisch werden die Eigenschaften der Missionen aufgelistet, danach folgen detailiierte Infomationen zur Mission.


\subsection{PathMission}
\label{subsec:module.Mission.PathMission}

Precondition: -\\
Creator: (Ersteller): CombatTask, oder ExploreMission\\
Postcondition: Pfad vollständig abgelaufen\\
Max. Ants (Maximale Anzahl Ameisen): 1\\
Max. Missionen: unbegrenzt\\
Valid (Gültigkeit): siehe ExploreMission bzw. CombatTask\\
Gather Ants (Ameisen rektrutieren): Nicht möglich\\
Release Ants (Ameisen entlassen): Nicht möglich\\
\\
Die Pathmission ist eine abstrakte Klasse die von ExploreMission und als anonyme Klasse im CombatTask implementiert wird. Die einzige Funktionalität die angeboten wird ist, eine Ameise die der Initialisierung mit Pfad mitgegeben wird, auf diesem definierten Pfad zu bewegen.

\subsection{AttackHillMission}
\label{subsec:module.Mission.AttackHillMission}

Precondition: Gegnerischer Hügel sichtbar\\
Creator: AttackHillsTask\\
Postcondition: Gegnerischer Hügel erobert\\
Max. Ants: unbegrenzt\\
Max. Missionen: Je gegnerischen Hügel eine Mission\\
Valid: solange gegnerischer Hügel nicht zerstört ist.\\
Gather Ants: pro Zug max. 5 Ameisen, die im Umkreis von 25 Tiles des gegnerischen Hügel sind.\\
Release Ants: Sicheres Food Tile in der Nähe. Eigener Hügel in der Nähe der Unterstüztung braucht. Wenn Mission im Status ControlHill ist werden alle Ameisen entlassen ausser zwei. Diese kontrollieren den Hügel.\\
\\
Diese Mission unterscheidet zwischen drei verschiedenen Modi. Der Modus wird zu Beginn jeder Runde durch die Methode determineState() definiert.\\
\\
\textbf{ControlEnemyHill}\\
Status ist aktiv wenn, 2 oder mehr eigene Ameise in der Nähe des gegnerischen Hügel sind. Der Gegner aber nur eine Amesise zur Verteidigung hat.\\
Hier werden alle Ameisen ausser die zwei zum gegnerischen Hügel am nächsten liegenden Ameisen aus der Mission entlassen. Die übrigen zwei Ameisen positionieren sich auf einer der vier diagonal gelegenen Zellen. Soblad die Ameisen positioniert sind, fressen Sie alle gegnersichen Ameisen die neu aus dem Hügel schlüpfen. Der Gegner kann sich so nur durch Ameisen vermehren die aus einem anderen Hügel schlüpfen. (Die Ameisen schlüpfen zufällig aus einem Hügel) Der Hügel wird erst zerstört wenn das Spiel endet, oder sich der Gegner mit anderen Ameisen dem Hügel nähert.

\begin{figure}[H]
\centering
\includegraphics[height=40mm]{91_bilder/ControlEnemyHill}
\caption{Ein gegnerischer Hügel wird durch unsere Ameisen (orange) kontrolliert.}
\label{fig:ControlEnemyHill}
\end{figure}

\textbf{DestroyHill}\\
Status ist aktiv wenn, Spiel 5 Züge vor Spielende ist\\
Wenn dieser Modus eintrifft ist das Spiel fast zu Ende. Deshalb wird versucht mit der Brechstange den Hügel zu erobern indem die Ameisen auf dem kürzesten Weg Richtung gegnerischen Hügel geschickt werden.\\
\\
\textbf{AttackEnemyHill}\\
Status ist aktiv in allen anderen Fällen\\
Alle Angreifer werden nach ihrer Lage in Gruppen zusammen gefasst. Für diese Gruppe wird ein Pfad zum gegnerischen Hügel berechnet. Falls der Pfad länger ist als 5 Tiles wird ein Meilenstein (Milestone) definiert. Nun werden mittels Breitensuche die Gegner zwischen dem Meilenstein und der Gruppe ermittelt. Mit dieser Ausgangslage wird eine AttackingCombatPositioning Klasse initialisert und die Gruppe, die gegnerischen Ameisen sowie der Meilenstein als Ziel mitgegeben. Die Klasse berechnet die Züge für die Gruppe. (Details siehe \ref{sec:module.CombatSituation}
       
\begin{figure}[H]
\centering
\includegraphics[height=40mm]{91_bilder/AttackHill}
\caption{Die erste zweier Gruppe ist in Kampfstellung. 4 weitere Ameisen rücken zur Front auf.}
\label{fig:AttackHill}
\end{figure}

\subsection{DefendHillMission}
\label{subsec:module.Mission.DefendHillMission}

Precondition: Keine, Mission wird zu Beginn des Spiels erstellt.\\
Creator: DefendHillTask\\
Postcondition: Gegnerischer Hügel ist erobert.\\
Max. Ants: unbegrenzt\\
Max. Missionen: Je eigener Hügel eine Mission\\
Valid: solange eigener Hügel nicht erobert ist.\\
Gather Ants: Mission soll immer mehr Verteidiger haben als Angreifer sich dem Hügel nähern.\\
Release Ants: Keine Angreifer in Sicht, werden die Ameisen (nicht alle) entlassen.\\
\\
TODO

\subsection{ExploreMission}
\label{subsec:module.Mission.ExploreMission}

Precondition: - \\
Creator: ExploreTask\\
Postcondition: Definerter Pfad zum Erkunden ist abgelaufen.\\
Max. Ants: 1\\
Max. Missionen: unbegrenzt\\
Valid: Solange Ameise ein gültiger Pfad hat.\\
Gather Ants: nicht möglich\\
Release Ants: nicht möglich\\
\\
Die Ameise läuft den vom ExploreTask vorgegebenen Pfad ab. Die Mission wird abgebrochen, wenn Futter in der Nähe ist, wenn ein gegnerischer Hügel oder gegnerische Ameisen auftauchen oder wenn ein eigener Hügel in der Nähe Hilfe braucht.

\begin{figure}[H]
\centering
\includegraphics[height=40mm]{91_bilder/exploreMission}
\caption{Eine Ameise auf einer ExploreMission bewegt sich in Richtung Fog Of War}
\label{fig:exploreMission}
\end{figure}

\subsection{GatherFoodMission}
\label{subsec:module.Mission.GatherFoodMission}

Precondition: Keine, Mission wird zu Beginn des Spiels erstellt.\\
Creator: GatherFoodTask\\
Postcondition: diese Mission besteht während dem ganzen Spiel \\
Max. Ants: unbegrenzt\\
Max. Missionen: 1\\
Valid: immer\\
Gather Ants: siehe Beschreibung\\
Release Ants: siehe Beschreibung\\

Es wird nur eine GatherFoodMission zu Begin des Spiels erstellt, diese Mission erstellt und kontrolliert die Pfade der Ameisen, welche auf Futtersuche sind.



\subsection{Verworfene und nicht verwendete Mission}
\label{subsec:implementation.Tasks.StupidMission}

Wie bereits im Kapitel Task erwähnt war nicht alles programmierte erfolgreich. Hier sind die Missionen aufgelistet die zu den Tasks gehören welche verworfen wurden oder nicht verwendet werden.

\begin{itemize}
\item \textbf{SwarmPathMission}
\item \textbf{AttackHillsInFlockMission}
\item \textbf{ConcentrateMission}
\item \textbf{FlockMission}
\end{itemize}

Für jedes Food-Tile werden in einem definierbaren Radius r die nächsten Ameisen bestimmt. Danach wird nach aufsteigender Luftliniendistanz mit dem Pfadsuchalgorithmus SIMPLE (s. Abschnitt \ref{subsec:implementation.Pfadsuche.Simple}) oder -- falls dieser keinen Pfad gefunden hat -- mit A* eine passierbare Route gesucht. Wenn ein Pfad existiert, kann mit der Ameise und dem Food-Tile eine GatherFoodMission erstellt werden, welche die Ameise zum Food-Tile führt. Zu jedem Food-Tile wird immer nur eine Ameise geschickt.
